
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.3. Du relationnel au graphe &#8212; Neo4j</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/03_creation_rdbs_graph';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. CRUD : Modification" href="04_modification.html" />
    <link rel="prev" title="3.2. À partir d’un fichier" href="03_creation_import.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="00_intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Neo4j</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00_intro.html">
                    Neo4j : Base de données NoSQL orientée graphe
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Chapitres</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_cypher.html">1. Langage Cypher</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="02_lecture.html">2. C<strong>R</strong>UD : Lecture</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="02_lecture_simple.html">2.1. Requête simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_lecture_complexe.html">2.2. Requête complexe</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="03_creation.html">3. <strong>C</strong>RUD : Création</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="03_creation_volee.html">3.1. À la volée</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_creation_import.html">3.2. À partir d’un fichier</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">3.3. Du relationnel au graphe</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="04_modification.html">4. CR<strong>U</strong>D : Modification</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_suppression.html">5. CRU<strong>D</strong> : Suppression</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/elenaberhoco/neo4j" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/elenaberhoco/neo4j/issues/new?title=Issue%20on%20page%20%2Fcontent/03_creation_rdbs_graph.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/content/03_creation_rdbs_graph.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Du relationnel au graphe</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equivalence-conceptuelle-entre-relationnel-et-graphe">3.3.1. Équivalence conceptuelle entre relationnel et graphe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-n1">3.3.2. Exercice n°1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#concevoir-le-graphe-en-fonction-des-cas-d-usage">3.3.3. Concevoir le graphe en fonction des cas d’usage</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-n2">3.3.4. Exercice n°2</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="du-relationnel-au-graphe">
<h1><span class="section-number">3.3. </span>Du relationnel au graphe<a class="headerlink" href="#du-relationnel-au-graphe" title="Link to this heading">#</a></h1>
<p>Avant toute implémentation en Neo4j, il faut réfléchir à la façon dont vous souhaitez organiser les données en graphe
et tenir compte de l’utilisation prévue.
L’outil <a class="reference external" href="https://arrows.app/#/local/">arrows.app</a> peut être utilisé pour représenter graphiquement les différents éléments de votre graphe.</p>
<section id="equivalence-conceptuelle-entre-relationnel-et-graphe">
<h2><span class="section-number">3.3.1. </span>Équivalence conceptuelle entre relationnel et graphe<a class="headerlink" href="#equivalence-conceptuelle-entre-relationnel-et-graphe" title="Link to this heading">#</a></h2>
<p>Pour la migration de données d’une base de données relationnelle vers une base de données orientées graphe, voici quelques équivalences utiles :</p>
<ul class="simple">
<li><p><strong>Un nom de table devient un label</strong> : Une table correspond généralement à un label dans une base de données orientée graphe.</p></li>
<li><p><strong>Une ligne devient un noeud</strong> : Une ligne dans une table correspond généralement à un noeud dans une base de données orientée graphe.</p></li>
<li><p><strong>Un nom de colonne devient une propriété</strong> : Les colonnes des tables correspondent généralement aux propriétés
des noeuds et des relations dans une base de données orientée graphe. Parfois, les valeurs stockées dans plusieurs colonnes peuvent correspondre
à une seule propriété associée à une liste de valeurs dans une base de données orientées graphe.
Par exemple, les informations stockées dans trois colonnes <code class="docutils literal notranslate"><span class="pre">email1</span></code>, <code class="docutils literal notranslate"><span class="pre">email2</span></code>, <code class="docutils literal notranslate"><span class="pre">email3</span></code> dans une base de données relationnelle
pourraient être stockées, dans une base de données orientée graphe, dans une seule propriété <code class="docutils literal notranslate"><span class="pre">email</span></code> associée à une liste contenant tous les mails renseignés.</p></li>
<li><p><strong>Une paire clé primaire / clé étrangère devient une relation</strong> : Une paire clé primaire / clé étrangère correspond généralement à une relation
dans une base de données orientée graphe. Si elles n’avaient pas d’autre utilité que la jointure, les colonnes associées peuvent ne pas être conservées
sous forme de propriétés une fois les relations créées.</p></li>
<li><p><strong>Une table d’association devient une relation</strong> : Une table d’association correspond généralement à une ou plusieurs relations,
avec éventuellement des propriétés.</p></li>
<li><p><strong>Une clé primaire devient une propriété avec contrainte d’unicité</strong> : Une clé primaire métier, i.e qui a une signification métier
(ex : référence produit, identifiant unique de connexion, numéro de sécurité social, adresse e-mail etc.), correspond généralement à une propriété
dans une base de données orientée graphe, à laquelle est appliquée une contrainte d’unicité, voire d’existence.</p></li>
</ul>
<p><strong>Attention !</strong> Ces équivalences doivent uniquement servir de point de départ.
Si cette première mise en correspondance des concepts permet de construire un modèle de graphe fonctionnel, elle est rarement suffisante.
Les véritables bénéfices d’une approche par graphe apparaissent lorsque le modèle est façonné <strong>en fonction des usages attendus</strong>.</p>
</section>
<section id="exercice-n1">
<h2><span class="section-number">3.3.2. </span>Exercice n°1<a class="headerlink" href="#exercice-n1" title="Link to this heading">#</a></h2>
<p>Proposez un modèle de graphe pour la base de données relationnelle ci-dessous.</p>
<figure class="align-default">
<img alt="../_images/northwind.jpg" src="../_images/northwind.jpg" />
</figure>
</section>
<section id="concevoir-le-graphe-en-fonction-des-cas-d-usage">
<h2><span class="section-number">3.3.3. </span>Concevoir le graphe en fonction des cas d’usage<a class="headerlink" href="#concevoir-le-graphe-en-fonction-des-cas-d-usage" title="Link to this heading">#</a></h2>
<p>Vous devez identifier les cas d’utilisation à venir pour garantir de <strong>bonnes performances à l’usage</strong> :
Quelles sont les données à inclure dans le graphe ? Quelles seront les <strong>requêtes les plus fréquentes</strong> ? Lesquelles sont à prioriser ?
Il n’y a pas de solution universelle, la modélisation implique nécessairement des compromis.
L’objectif est de <strong>limiter la portion du graphe parcourue lors de l’exécution d’une requête</strong>.</p>
<ul class="simple">
<li><p><strong>Formuler les requêtes sous forme de question</strong> peut aider à construire le graphe :</p>
<ul>
<li><p>Les noms dans les questions correspondent généralement à des labels (ex : <code class="docutils literal notranslate"><span class="pre">ACTOR</span></code> et <code class="docutils literal notranslate"><span class="pre">MOVIE</span></code> pour “Quels acteurs ont joué dans tel film ?”)</p></li>
<li><p>Les verbes correspondent généralement à des relations (ex : <code class="docutils literal notranslate"><span class="pre">ACTED_IN</span></code> pour “Quels acteurs ont joué dans tel film ?”)</p></li>
</ul>
</li>
<li><p><strong>L’utilisation de labels permet de réduire le nombre de noeuds traversés</strong>. Spécifier un label permet en effet de limiter le nombre de noeuds à partir desquels lancer une <strong>requête</strong>.
Toutefois, ne créez de labels que s’ils facilitent la plupart des cas d’utilisation : une bonne pratique consiste à <strong>ne pas dépasser quatre labels par noeud</strong>.</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">Example</p>
<p>Prenons une base de données contenant des films – associés au label <code class="docutils literal notranslate"><span class="pre">Movie</span></code> – les acteurs et réalisateurs de ces films, ainsi que les utilisateurs les ayant notés – tous associés à un label <code class="docutils literal notranslate"><span class="pre">Person</span></code> mais identifiables
via le type des relations sortantes, respectivement <code class="docutils literal notranslate"><span class="pre">ACTED_IN</span></code>, <code class="docutils literal notranslate"><span class="pre">DIRECTED</span></code> et <code class="docutils literal notranslate"><span class="pre">RATED</span></code>.
Accéder aux acteurs nécessiterait de récupérer, dans un premier temps, tous les noeuds de label <code class="docutils literal notranslate"><span class="pre">Person</span></code>, puis de filtrer en fonction de l’existence ou non de relations sortantes de type <code class="docutils literal notranslate"><span class="pre">ACTED_IN</span></code>.
Récupérer l’ensemble des noeuds <code class="docutils literal notranslate"><span class="pre">Person</span></code> serait sous-optimal pour un graphe de très grande taille.
Une façon d’améliorer la récupération des noeuds correspondant à des acteurs pourrait être de modifier le graphe afin d’inclure un label <code class="docutils literal notranslate"><span class="pre">Actor</span></code>.</p>
</div>
<ul class="simple">
<li><p>Le fan-out (déploiement), qui consiste à <strong>convertir les valeurs répétées de propriétés en noeuds</strong>, peut améliorer les performances des <strong>requêtes</strong> en <strong>réduisant le nombre de noeuds à traverser</strong>.
Il permet aussi de <strong>limiter la quantité de stockage nécessaire</strong> : la dénormalisation, étroitement liée à la notion d’agrégat, est utile pour améliorer la rapidité de certaines requêtes, mais dupliquer les données
signifie aussi stocker davantage, et il est parfois intéressant de transformer les valeurs concernées en noeuds uniques. Le principal risque du fan-out est qu’il peut conduire à des nœuds très denses, appelés super-nœuds.
Il s’agit de nœuds possédant des centaines de milliers de relations entrantes ou sortantes. Les super-nœuds doivent être manipulés avec précaution.</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">Example</p>
<p>Dans une base de données contenant des noeuds <code class="docutils literal notranslate"><span class="pre">Restaurant</span></code>, représenter les villes sous forme de noeuds distincts plutôt que sous forme de propriétés des noeuds <code class="docutils literal notranslate"><span class="pre">Restaurant</span></code> permet
de répondre plus efficacement à la question : “Quels restaurants se situent dans telle ville ?”. En effet, plutôt que de parcourir tous les noeuds de label <code class="docutils literal notranslate"><span class="pre">Restaurant</span></code> et d’évaluer pour chacun d’eux
la propriété <code class="docutils literal notranslate"><span class="pre">city</span></code>, créer des noeuds <code class="docutils literal notranslate"><span class="pre">City</span></code> limitera le nombre de noeuds à examiner puisqu’il suffira à Neo4j d’identifier le noeud <code class="docutils literal notranslate"><span class="pre">City</span></code> avec la propriété <code class="docutils literal notranslate"><span class="pre">name</span></code> adéquate, puis de renvoyer
les restaurants reliés à ce noeud là.</p>
</div>
<ul class="simple">
<li><p>Créer des <strong>relations hautement spécialisées</strong> peut améliorer l’efficacité des requêtes et rendre l’utilisation du graphe plus intuitive.
Neo4j, en tant que base de données orientée graphe, est en effet <strong>conçu pour parcourir les relations très rapidement</strong>.
Dans certains cas, il sera ainsi plus efficace d’interroger le graphe en s’appuyant sur les types des relations plutôt que sur les propriétés des noeuds.
À la création de relations spécialisées, il est recommandé de <strong>ne pas supprimer les relations génériques d’origine</strong>, afin de ne pas impacter les requêtes existantes qui en dépendent.</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">Example</p>
<p>Prenons une base de données contenant des films (noeuds <code class="docutils literal notranslate"><span class="pre">MOVIE</span></code>) et des utilisateurs (noeuds <code class="docutils literal notranslate"><span class="pre">USER</span></code>) ayant noté ces films (relations <code class="docutils literal notranslate"><span class="pre">RATED</span></code> avec propriété <code class="docutils literal notranslate"><span class="pre">rating</span></code>). Imaginons que la requête “Combien d’utilisateurs ont
donné une note inférieure à 5 à tel film ?” soit très fréquente. En l’absence de relation spécialisée, la requête doit parcourir l’ensemble des relations <code class="docutils literal notranslate"><span class="pre">RATED</span></code> et évaluer la propriété <code class="docutils literal notranslate"><span class="pre">rating</span></code> associée.
Si le graphe est grand, le temps de traitement sera long. Dans ce cas, créer une relation spécialisée <code class="docutils literal notranslate"><span class="pre">RATED_BELOW_5</span></code>, tout en conservant la relation <code class="docutils literal notranslate"><span class="pre">RATED</span></code> originale pour les autres cas d’usage,
permettra d’accélérer l’exécution puisqu’il suffira à Neo4j de récupérer les noeuds <code class="docutils literal notranslate"><span class="pre">Movie</span></code> vers lesquels pointent une relation de type <code class="docutils literal notranslate"><span class="pre">RATED_BELOW_5</span></code>.</p>
</div>
<ul class="simple">
<li><p>Utilisez des <strong>index</strong> pour les propriétés les plus sollicitées ou celles prenant de nombreuses valeurs distinctes (ex : identifiants uniques, noms d’utilisateurs).
Les index doivent toutefois être utilisés avec discernement pour les raisons suivantes : chaque index double quasiment l’<strong>espace de stockage</strong> occupé par les données indexées,
et l’ajout d’index <strong>ralentit les opérations d’écriture</strong> car ils doivent être mis à jour à chaque requête d’écriture. Autrement dit, lorsque les performances en écriture
sont critiques pour un cas d’usage donné, il peut être préférable de limiter les index pour les propriétés concernées.</p></li>
</ul>
<p><strong>Attention !</strong> <strong>À chaque modification</strong> apportée, n’oubliez pas de <strong>modifier les requêtes concernées</strong> par ces modifications.</p>
<p>Il est bon de noter que Neo4j réalise aussi un travail d’optimisation des requêtes en arrière plan. Lorsque vous soumettez une requête à Neo4j,
un optimiseur de requête (ou planificateur) détermine quel est le moyen le plus efficace d’exécuter la requête compte tenu de l’état à l’instant <em>t</em>
de la base de données, c’est-à-dire des index et des contraintes disponibles ainsi que de diverses statistiques gérées par la base de données.
Le planificateur produit alors un plan logique, transformé ensuite en <strong>plan d’exécution</strong>, qui exécute effectivement la requête sur la
base de données.</p>
<p>Vous pouvez <strong>tester l’efficacité des modifications réalisées</strong> en faisant précéder la requête à évaluer du mot clé <code class="docutils literal notranslate"><span class="pre">PROFILE</span></code>.
En plus du résultat de la requête, le <strong>plan d’exécution</strong>, comprenant notamment le <strong>nombre de lignes parcourues</strong> par Neo4j <strong>à chaque étape</strong>,
sera ainsi renvoyé. Vous pourrez donc comparer la portion du graphe explorée <strong>avant et après modification</strong>.
N’hésitez pas à retravailler autant de fois que nécessaire votre graphe. <strong>La création d’un graphe est itérative</strong>.</p>
<p>Vous trouverez de nombreux exemples et conseils dans la documentation Neo4j (par exemple cet <a class="reference external" href="https://neo4j.com/docs/getting-started/data-modeling/modeling-designs/">article</a>,
qui présente le concept de noeuds intermédiaires).</p>
</section>
<section id="exercice-n2">
<h2><span class="section-number">3.3.4. </span>Exercice n°2<a class="headerlink" href="#exercice-n2" title="Link to this heading">#</a></h2>
<p>Voici quelques cas d’utilisation fréquents pour la base de données précédente :</p>
<ul class="simple">
<li><p>Publicité ciblée : <strong>Quels clients ont commandé le même produit que tel client ?</strong></p></li>
<li><p>Publicité ciblée : <strong>Quels sont les produits les plus vendus dans telle ville ?</strong></p></li>
<li><p>Alerte qualité de service : <strong>Quelles commandes ont été livrées en retard ?</strong></p></li>
<li><p>Service client : <strong>Quels est l’historique de commande de tel client ?</strong></p></li>
<li><p>Service RH : <strong>Qui sont les managers de l’entreprise ?</strong></p></li>
</ul>
<p>Comment modifieriez-vous le modèle de graphe conçu à l’exercice n°1 ?</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="03_creation_import.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3.2. </span>À partir d’un fichier</p>
      </div>
    </a>
    <a class="right-next"
       href="04_modification.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4. </span>CR<strong>U</strong>D : Modification</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equivalence-conceptuelle-entre-relationnel-et-graphe">3.3.1. Équivalence conceptuelle entre relationnel et graphe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-n1">3.3.2. Exercice n°1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#concevoir-le-graphe-en-fonction-des-cas-d-usage">3.3.3. Concevoir le graphe en fonction des cas d’usage</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-n2">3.3.4. Exercice n°2</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Elena Berhocoïrigoin
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>